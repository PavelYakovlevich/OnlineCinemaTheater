<div class="background-image-page">
    <div class="email-verified-fogging w-full h-full">
        <div class="page-container">
            <div class="app-form">
                <app-error-box *ngIf='lastError' [error]="lastError" class="mb-5"></app-error-box>

                <h1>Enter new password</h1>

                <mat-form-field appearance="fill" class="w-full mb-3">
                    <mat-label>Enter your password</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" [formControl] = "passwordControl">
                    <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                        <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-error *ngIf="passwordControl.invalid">{{ getErrorMessage(passwordControl) }}</mat-error>
                </mat-form-field>
        
                <mat-form-field appearance="fill" class="w-full mb-3">
                    <mat-label>Repeat your password</mat-label>
                    <input matInput [type]="hidePassword ? 'password' : 'text'" [formControl] = "repeatPasswordControl">
                    <mat-error *ngIf="repeatPasswordControl.invalid">{{ getErrorMessage(repeatPasswordControl) }}</mat-error>
                </mat-form-field>

                <button 
                    mat-button 
                    (click)="onChangePasswordBtnWasClicked()" 
                    [disabled]="!allControlsAreValid() || requestInProgress"
                    class="action-btn">
                    Change password
                </button>

                <mat-progress-bar class='w-100 h-100 mt-5' *ngIf='requestInProgress' mode="indeterminate"></mat-progress-bar>
            </div>
        </div>
    </div>
</div>